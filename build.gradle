apply plugin: 'eclipse'
apply plugin: 'idea'

    buildscript {
      repositories {
        mavenCentral()
      }
      dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:1.5.10.RELEASE")
      }
    }

subprojects {
    apply plugin: 'java'

    version = "1.1.1"

    repositories {
      mavenLocal()
      jcenter()
    }

    dependencies {
      compile "info.picocli:picocli:2.3.0"
      compile "fastily:jwiki:1.5.1"
    }
}

project(':mtc-cli') {
    apply plugin: 'application'

    mainClassName = "mtc.CMTC"

    dependencies {
        compile project(':mtc-shared')
    }


    task doDist(type: Jar) {
      baseName = "CMTC"

      from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
      }

      manifest {
        attributes 'Main-Class': 'mtc.CMTC'
      }
      
      exclude "META-INF/*.SF", "**/LICENSE*", "**/NOTICE*", "**/maven/**"

      with jar
    }
}

project(':mtc-ui') {
    apply plugin: 'application'

    mainClassName = "mtc.App"

    dependencies {
        compile project(':mtc-shared')
    }


    task doDist(type: Jar) {
      baseName = "MTC"

      from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
      }

      manifest {
        attributes 'Main-Class': 'mtc.App'
      }
      
      exclude "META-INF/*.SF", "**/LICENSE*", "**/NOTICE*", "**/maven/**"

      with jar
    }
}

project(':mtc-web') {


    // apply plugin: 'application'
    apply plugin: 'org.springframework.boot'

    // mainClassName = "mtc.WebApp"

    dependencies {
        compile project(':mtc-shared')
        
        compile "fastily:mw-oauth:0.0.1"
        compile "org.springframework.boot:spring-boot-starter-web:1.5.10.RELEASE"
    }
}


task wrapper(type: Wrapper) {
    gradleVersion = '4.5.1'
}